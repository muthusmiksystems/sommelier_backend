"use strict";(self.webpackChunksommelier=self.webpackChunksommelier||[]).push([[629,345],{2697:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(9950),o=s(1580),r=s.n(o),i=s(6465),n=s(767),l=s(6534),d=s(4414);class c extends a.Component{constructor(){super(...arguments),this.state={dropdownItem:null},this.handleSetDefaultAddress=(e,t)=>{e.target.classList.contains("si")||this.props.handleSetDefaultAddress(t.id,t)},this.handleDropdown=e=>{this.setState({dropdownItem:e.currentTarget})},this.handleDropdownClose=()=>{this.setState({dropdownItem:null})}}render(){const{user:e,address:t}=this.props;return(0,d.jsxs)(a.Fragment,{children:[(0,d.jsxs)("div",{className:!t.is_operational&&this.props.fromCartPage?"bg-white single-address-card d-flex no-click":"bg-white single-address-card d-flex",onClick:e=>this.handleSetDefaultAddress(e,t),style:{position:"relative"},children:[(0,d.jsxs)("div",{className:!t.is_operational&&this.props.fromCartPage?"address-not-usable w-100":"w-100",children:[e.data.default_address_id===t.id?(0,d.jsxs)("button",{className:"btn btn-sm pull-right btn-address-default p-0 m-0",style:{border:"0",right:"0px",fontSize:"1.3rem"},children:[(0,d.jsx)("i",{className:"si si-check",style:{color:localStorage.getItem("storeColor")}}),(0,d.jsx)(r(),{duration:200})]}):(0,d.jsx)(a.Fragment,{children:this.props.fromCartPage&&(0,d.jsx)(a.Fragment,{children:!t.is_operational&&(0,d.jsxs)("span",{className:"text-danger text-uppercase font-w600 text-sm08",children:[" ",(0,d.jsx)("i",{className:"si si-close"})," ",localStorage.getItem("addressDoesnotDeliverToText")]})})}),null!==t.tag&&(0,d.jsx)("h6",{className:"m-0 text-uppercase",children:(0,d.jsx)("strong",{children:t.tag})}),(0,d.jsxs)("div",{children:[null!==t.house&&(0,d.jsx)("p",{className:"m-0 text-capitalize",children:null===t.tag?(0,d.jsx)("strong",{children:t.house}):(0,d.jsx)("span",{children:t.house})}),(0,d.jsx)("p",{className:"m-0 text-capitalize text-sm08",children:t.address})]})]}),(0,d.jsx)("div",{children:!this.props.fromCartPage&&this.props.deleteButton&&(0,d.jsx)(a.Fragment,{children:e.data.default_address_id!==t.id&&(0,d.jsx)("button",{className:"btn btn-sm pull-right btn-address-default p-0 m-0 btn-delete-address",style:{border:"0",right:"0px",fontSize:"1.3rem",zIndex:2},children:(0,d.jsx)("i",{className:"si si-trash",style:{fontSize:"1.3rem"},onClick:this.handleDropdown})})})}),(0,d.jsx)(r(),{duration:500,hasTouch:!0})]}),(0,d.jsx)(i.A,{id:"simple-menu",keepMounted:!0,anchorEl:this.state.dropdownItem,open:Boolean(this.state.dropdownItem),onClose:this.handleDropdownClose,TransitionComponent:l.A,MenuListProps:{disablePadding:!0},elevation:3,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,d.jsx)(n.A,{onClick:()=>{this.props.handleDeleteAddress(t.id),this.handleDropdownClose()},children:localStorage.getItem("deleteAddressText")})})]})}}const h=c},726:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(9950),o=s(7889),r=s.n(o),i=s(6850),n=s(2515),l=s(8858),d=s(1580),c=s.n(d),h=s(4414);class g extends a.Component{render(){const{loading:e,locations:t,handlePopularLocationClick:s}=this.props;return(0,h.jsx)(a.Fragment,{children:(0,h.jsx)("div",{className:"p-15 mt-15",children:e?(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)("h1",{className:"text-muted h4",children:localStorage.getItem("searchPopularPlaces")}),(0,h.jsxs)(l.Ay,{height:160,width:400,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb",children:[(0,h.jsx)("rect",{x:"0",y:"0",rx:"15",ry:"15",width:"125",height:"30"}),(0,h.jsx)("rect",{x:"135",y:"0",rx:"15",ry:"15",width:"100",height:"30"}),(0,h.jsx)("rect",{x:"245",y:"0",rx:"15",ry:"15",width:"110",height:"30"}),(0,h.jsx)("rect",{x:"0",y:"40",rx:"15",ry:"15",width:"85",height:"30"}),(0,h.jsx)("rect",{x:"95",y:"40",rx:"15",ry:"15",width:"125",height:"30"})]})]}):(0,h.jsxs)(a.Fragment,{children:[t.length>0&&(0,h.jsx)("h1",{className:"text-muted h4",children:localStorage.getItem("searchPopularPlaces")}),t.map(((e,t)=>(0,h.jsx)(r(),{top:!0,delay:80*t,children:(0,h.jsxs)("button",{type:"button",className:"btn btn-rounded btn-alt-secondary btn-md mb-15 mr-15",style:{position:"relative"},onClick:()=>{s(e)},children:[(0,h.jsx)(c(),{duration:"500"}),e.name]})},e.id)))]})})})}}const u=g;var p=s(8429),m=s(8341),x=s(6087),j=s(8974),y=s(9351),f=s(2697),S=s(273);class C extends a.Component{constructor(){super(...arguments),this.state={google_script_loaded:!1,loading_popular_location:!0,gps_loading:!1},this.handleSetDefaultAddress=(e,t)=>{const{user:s}=this.props;s.success&&this.props.setDefaultAddress(s.data.id,e,s.data.auth_token).then((()=>{new Promise((e=>{const s={lat:t.latitude,lng:t.longitude,address:t.address,house:t.house,tag:t.tag};localStorage.setItem("userSetAddress",JSON.stringify(s)),e("Address Saved")})).then((()=>{"1"===localStorage.getItem("fromCart")?(localStorage.removeItem("fromCart"),this.context.router.history.push("/cart")):(this.props.clearRestaurantList(),this.context.router.history.push("/"))}))}))},this.handlePopularLocationClick=e=>{const t={lat:e.latitude,lng:e.longitude,address:e.name,house:null,tag:null,businessLocation:!0};localStorage.setItem("userSetAddress",JSON.stringify(t));new Promise((e=>{localStorage.setItem("userSetAddress",JSON.stringify(t)),localStorage.setItem("userAlreadySelectedLocation","true"),e("Location Saved")})).then((()=>{window.location.replace("/")}))},this.handleGeoLocationClick=e=>{new Promise((t=>{localStorage.setItem("geoLocation",JSON.stringify(e[0])),t("GeoLocation Saved")})).then((()=>{this.context.router.history.push("/my-location")}))}}componentDidMount(){this.props.getPopularLocations(),this.searchInput&&this.searchInput.focus();if(!document.getElementById("googleMaps")){const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key="+localStorage.getItem("googleApiKey")+"&libraries=places",e.id="googleMaps",document.body.appendChild(e),e.onload=()=>{this.setState({google_script_loaded:!0})}}const{user:e}=this.props;e.success&&this.props.getAddresses(e.data.id,e.data.auth_token,this.state.restaurant_id)}componentWillUnmount(){const e=document.getElementById("googleMaps");e&&e.parentNode.removeChild(e)}componentWillReceiveProps(e){this.props.popular_locations!==e.popular_locations&&this.setState({loading_popular_location:!1})}render(){if(window.innerWidth>768)return(0,h.jsx)(p.C5,{to:"/"});if(null===localStorage.getItem("storeColor"))return(0,h.jsx)(p.C5,{to:"/"});const{user:e,popular_locations:t,addresses:s}=this.props;return(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(n.A,{seotitle:localStorage.getItem("seoMetaTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),(0,h.jsx)("div",{className:"col-12 p-0 pt-0",children:this.state.google_script_loaded&&(0,h.jsx)(i.Ay,{debounce:750,withSessionToken:!0,loader:(0,h.jsx)("img",{src:"/assets/img/various/spinner.svg",className:"location-loading-spinner",alt:"loading"}),renderInput:e=>(0,h.jsxs)("div",{className:"input-location-icon-field",children:[(0,h.jsx)("i",{className:"si si-magnifier"}),(0,h.jsxs)("div",{className:"input-group-prepend",children:[(0,h.jsxs)("button",{type:"button",className:"btn search-navs-btns location-back-button",style:{position:"relative"},onClick:()=>this.context.router.history.goBack(),children:[(0,h.jsx)("i",{className:"si si-arrow-left"}),(0,h.jsx)(c(),{duration:"500"})]}),(0,h.jsx)("input",{...e,className:"form-control search-input",placeholder:localStorage.getItem("searchAreaPlaceholder"),ref:e=>{this.searchInput=e}})]})]}),renderSuggestions:(e,t,s)=>(0,h.jsxs)("div",{className:"location-suggestions-container",children:[t.map(((e,t)=>(0,h.jsx)(r(),{top:!0,delay:50*t,children:(0,h.jsxs)("div",{className:"location-suggestion",onClick:t=>{s(e,t),(0,i.y8)(e.place_id).then((e=>this.handleGeoLocationClick(e))).catch((e=>console.error(e)))},children:[(0,h.jsx)("span",{className:"location-main-name",children:e.structured_formatting.main_text}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"location-secondary-name",children:e.structured_formatting.secondary_text})]})},e.id))),(0,h.jsx)("img",{src:"/assets/img/various/powered_by_google_on_white.png",alt:"powered by Google",className:"pl-15"})]})})}),(0,h.jsx)(S.A,{fetchGpsAutomaticallyAndroid:!1}),null===localStorage.getItem("fromCart")&&(0,h.jsx)(u,{loading:this.state.loading_popular_location,handlePopularLocationClick:this.handlePopularLocationClick,locations:t}),e.success&&s.length>0&&(0,h.jsx)(a.Fragment,{children:(0,h.jsxs)("div",{className:"p-15 mt-10 location-saved-address",children:[(0,h.jsx)("h1",{className:"text-muted h4",children:localStorage.getItem("locationSavedAddresses")}),s.map((t=>(0,h.jsx)(f.A,{handleDeleteAddress:this.handleDeleteAddress,deleteButton:!1,address:t,user:e,fromCartPage:!1,handleSetDefaultAddress:this.handleSetDefaultAddress},t.id)))]})})]})}}C.contextTypes={router:()=>null};const v=(0,m.Ng)((e=>({user:e.user.user,popular_locations:e.popular_locations.popular_locations,addresses:e.addresses.addresses})),{getPopularLocations:x.c,getAddresses:j.tS,setDefaultAddress:j.y_,clearRestaurantList:y.Bg})(C)},1629:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(9950),o=s(5136),r=s(72),i=s.n(r),n=s(2920),l=s(8341),d=s(726),c=s(2772),h=s(4414);class g extends a.Component{constructor(){super(),this.state={loading:!0,guestUser:!1,statusMsg:"",countryCodeSelect:"",name:"",email:"",phone:"",password:"",loggedinAsCustomer:!1,email_phone_already_used:!1,error:!1,errorMessage:"",guestRegisterSuccess:!1},this.handleInputChange=e=>{"phone"===e.target.name?(this.setState({phone:this.state.countryCodeSelect+e.target.value.replace(/^0+/,"")}),this.setState({onlyPhone:e.target.value.replace(/^0+/,"")})):this.setState({[e.target.name]:e.target.value})},this.handleCountryCodeChange=e=>{const{target:t}=e;this.setState({countryCodeSelect:t.value},(()=>{this.setState({phone:t.value+this.state.onlyPhone})}))},this.processDefaultCountryCode=()=>{const e=localStorage.getItem("phoneCountryCode").split(",");return 0===e.length?(0,h.jsx)("span",{className:"country-code"}):1===e.length?(0,h.jsx)("span",{className:"country-code",children:e[0].replace(/\s/g,"")}):e.length>1?(0,h.jsx)("select",{name:"countryCodeSelect",onChange:this.handleCountryCodeChange,className:"country-code--dropdown",children:e.map((e=>(0,h.jsx)("option",{value:e.replace(/\s/g,""),children:e.replace(/\s/g,"")},e)))}):void 0},this.handleGuestRegister=e=>{e.preventDefault(),this.validator.fieldValid("name")&&this.validator.fieldValid("email")&&this.validator.fieldValid("phone")&&this.validator.fieldValid("password")?(this.setState({loading:!0}),this.props.registerGuestUser(this.state.name,this.state.phone,this.state.email,this.state.password)):(console.log("Validation Failed"),this.validator.showMessages())},this.validator=new(i())({autoForceUpdate:this,messages:{required:localStorage.getItem("fieldValidationMsg"),string:localStorage.getItem("nameValidationMsg"),email:localStorage.getItem("emailValidationMsg"),regex:localStorage.getItem("phoneValidationMsg"),min:localStorage.getItem("minimumLengthValidationMessage")}})}componentDidMount(){const e=localStorage.getItem("phoneCountryCode").split(",");this.setState({countryCodeSelect:e[0].replace(/\s/g,"")});const t=this.props.match.params.id;"undefined"===typeof t?this.setState({loading:!1,guestUser:!0}):(this.setState({guestUser:!1}),this.props.loginAsCustomer(t).then((e=>{e&&e[0].payload&&e[0].payload.success&&this.setState({loading:!1,loggedinAsCustomer:!0})})))}componentWillReceiveProps(e){const{user:t}=this.props;if(t!==e.user&&this.setState({loading:!1}),e.user.success&&null!==e.user.data.default_address){const t={lat:e.user.data.default_address.latitude,lng:e.user.data.default_address.longitude,address:e.user.data.default_address.address,house:e.user.data.default_address.house,tag:e.user.data.default_address.tag};localStorage.setItem("userSetAddress",JSON.stringify(t))}e.user.email_phone_already_used&&this.setState({email_phone_already_used:!0}),e.user||this.setState({error:!0}),e.user.success&&this.state.guestUser&&(console.log("User Registered and Loggedin"),this.setState({guestRegisterSuccess:!0}),setTimeout((()=>{this.context.router.history.push("/search-location")}),1880))}render(){const{user:e}=this.props;return(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(c.m,{children:(0,h.jsx)("style",{type:"text/css",children:"\n                    .location-back-button {\n                        display: none;\n                    }\n                    "})}),this.state.loading&&(0,h.jsx)(o.A,{}),this.state.email_phone_already_used&&(0,h.jsx)("div",{className:"auth-error",children:(0,h.jsx)("div",{className:"error-shake",children:localStorage.getItem("emailPhoneAlreadyRegistered")})}),this.state.error&&(0,h.jsx)("div",{className:"auth-error",children:(0,h.jsx)("div",{className:"error-shake",children:""!==this.state.errorMessage?this.state.errorMessage:localStorage.getItem("loginErrorMessage")})}),this.state.guestRegisterSuccess&&(0,h.jsx)(a.Fragment,{children:(0,h.jsxs)("div",{className:"update-full-notification d-block",style:{zIndex:9999999999,backgroundColor:"#fff"},children:[(0,h.jsx)("div",{style:{marginTop:"15rem"},children:(0,h.jsx)("img",{src:"/assets/img/order-placed.gif",alt:"Successful",className:"img-fluid",style:{width:"120px"}})}),(0,h.jsxs)("div",{style:{marginTop:"4rem"},className:"text-center",children:[(0,h.jsx)("h3",{className:"text-dark mb-2",children:"Registration Successful"}),(0,h.jsxs)("h5",{className:"mb-0",children:[" Loggedin as ",this.props.user.data.name]})]}),(0,h.jsx)("div",{style:{marginTop:"4rem"},className:"text-center text-muted",children:(0,h.jsx)("p",{className:"text-muted small",children:" Redirecting please wait..."})})]})}),this.state.guestUser?(0,h.jsxs)(a.Fragment,{children:[(0,h.jsxs)("div",{className:"cust-auth-header",children:[(0,h.jsx)("div",{className:"input-group",children:(0,h.jsx)("div",{className:"input-group-prepend"})}),(0,h.jsxs)("div",{className:"login-texts px-15 mt-30 pb-20",children:[(0,h.jsx)("span",{className:"login-title text-capitalize",children:"Guest Customer"}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"login-subtitle",children:"Enter the details"})]})]}),(0,h.jsx)("div",{className:"bg-white",children:(0,h.jsxs)("form",{onSubmit:this.handleGuestRegister,id:"registerForm",children:[(0,h.jsxs)("div",{className:"form-group px-15 pt-30",children:[(0,h.jsxs)("div",{className:"col-md-9 pb-5",children:[(0,h.jsx)("input",{type:"text",name:"name",onChange:this.handleInputChange,className:"form-control auth-input",placeholder:localStorage.getItem("loginLoginNameLabel")}),this.validator.message("name",this.state.name,"required|string")]}),(0,h.jsx)("div",{className:"col-md-9 pb-5",children:(0,h.jsxs)("div",{children:[this.processDefaultCountryCode(),(0,h.jsxs)("span",{children:[(0,h.jsx)("input",{name:"phone",type:"tel",onChange:this.handleInputChange,className:"form-control phone-number-country-code auth-input",placeholder:localStorage.getItem("loginLoginPhoneLabel")}),this.validator.message("phone",this.state.phone,["required",{regex:["^\\+[1-9]\\d{1,14}$"]},{min:["8"]}])]})]})}),(0,h.jsxs)("div",{className:"col-md-9 pb-5",children:[(0,h.jsx)("input",{type:"text",name:"email",onChange:this.handleInputChange,className:"form-control auth-input",placeholder:"Email is optional"}),this.validator.message("email",this.state.email,"email")]}),(0,h.jsxs)("div",{className:"col-md-9",children:[(0,h.jsx)("input",{type:"password",name:"password",onChange:this.handleInputChange,className:"form-control auth-input",placeholder:"Password is optional"}),this.validator.message("password",this.state.password,"min:6")]})]}),(0,h.jsx)("div",{className:"mt-20 mx-15 d-flex justify-content-center",children:(0,h.jsx)("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor"),width:"90%",borderRadius:"4px"},children:localStorage.getItem("firstScreenRegisterBtn")})})]})})]}):(0,h.jsxs)(a.Fragment,{children:[(0,h.jsxs)("div",{className:"cust-auth-header",children:[(0,h.jsx)("div",{className:"input-group",children:(0,h.jsx)("div",{className:"input-group-prepend"})}),(0,h.jsxs)("div",{className:"login-texts px-15 mt-30 pb-20",children:[(0,h.jsx)("span",{className:"login-title text-capitalize",children:this.state.loggedinAsCustomer?(0,h.jsxs)(a.Fragment,{children:["Loggedin as ",e.data.name]}):(0,h.jsx)("span",{children:"Logging in as Customer"})}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"login-subtitle",children:this.state.loggedinAsCustomer?(0,h.jsxs)(a.Fragment,{children:["Phone: ",e.data.phone," ",(0,h.jsx)("br",{}),"Email: ",e.data.email]}):(0,h.jsx)("span",{children:"Please Wait..."})})]})]}),this.state.loggedinAsCustomer&&(0,h.jsx)(a.Fragment,{children:(0,h.jsx)(d.default,{})})]}),(0,h.jsx)("p",{children:this.state.statusMsg})]})}}g.contextTypes={router:()=>null};const u=(0,l.Ng)((e=>({user:e.user.user,settings:e.settings.settings,addresses:e.addresses.addresses})),{loginAsCustomer:n.k8,registerGuestUser:n.Lw})(g)},8974:(e,t,s)=>{s.d(t,{Ex:()=>n,ab:()=>l,tS:()=>i,y_:()=>d});var a=s(8262),o=s(1753),r=s(8469);const i=(e,t,s)=>i=>{r.A.post(o.ss,{user_id:e,token:t,restaurant_id:s}).then((e=>{const t=e.data;return i({type:a.oz,payload:t})})).catch((function(e){console.log(e)}))},n=(e,t,s,i,n,l,d,c)=>h=>{r.A.post(o.RA,{token:t,user_id:e,latitude:s,longitude:i,address:n,house:l,tag:d,get_only_default_address:c}).then((e=>{const t=e.data;return h({type:a.b8,payload:t})})).catch((function(e){console.log(e)}))},l=(e,t,s)=>i=>{r.A.post(o.pP,{token:s,user_id:e,address_id:t}).then((e=>{const t=e.data;return i({type:a.fJ,payload:t})})).catch((function(e){console.log(e)}))},d=(e,t,s)=>i=>r.A.post(o.tv,{token:s,user_id:e,address_id:t}).then((e=>{const t=e.data;return i({type:a.Zm,payload:t})})).catch((function(e){console.log(e)}))}}]);