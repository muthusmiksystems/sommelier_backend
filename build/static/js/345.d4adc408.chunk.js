"use strict";(self.webpackChunksommelier=self.webpackChunksommelier||[]).push([[345],{2697:(e,t,s)=>{s.d(t,{A:()=>h});var o=s(9950),a=s(1580),r=s.n(a),n=s(6465),l=s(767),i=s(6534),d=s(4414);class c extends o.Component{constructor(){super(...arguments),this.state={dropdownItem:null},this.handleSetDefaultAddress=(e,t)=>{e.target.classList.contains("si")||this.props.handleSetDefaultAddress(t.id,t)},this.handleDropdown=e=>{this.setState({dropdownItem:e.currentTarget})},this.handleDropdownClose=()=>{this.setState({dropdownItem:null})}}render(){const{user:e,address:t}=this.props;return(0,d.jsxs)(o.Fragment,{children:[(0,d.jsxs)("div",{className:!t.is_operational&&this.props.fromCartPage?"bg-white single-address-card d-flex no-click":"bg-white single-address-card d-flex",onClick:e=>this.handleSetDefaultAddress(e,t),style:{position:"relative"},children:[(0,d.jsxs)("div",{className:!t.is_operational&&this.props.fromCartPage?"address-not-usable w-100":"w-100",children:[e.data.default_address_id===t.id?(0,d.jsxs)("button",{className:"btn btn-sm pull-right btn-address-default p-0 m-0",style:{border:"0",right:"0px",fontSize:"1.3rem"},children:[(0,d.jsx)("i",{className:"si si-check",style:{color:localStorage.getItem("storeColor")}}),(0,d.jsx)(r(),{duration:200})]}):(0,d.jsx)(o.Fragment,{children:this.props.fromCartPage&&(0,d.jsx)(o.Fragment,{children:!t.is_operational&&(0,d.jsxs)("span",{className:"text-danger text-uppercase font-w600 text-sm08",children:[" ",(0,d.jsx)("i",{className:"si si-close"})," ",localStorage.getItem("addressDoesnotDeliverToText")]})})}),null!==t.tag&&(0,d.jsx)("h6",{className:"m-0 text-uppercase",children:(0,d.jsx)("strong",{children:t.tag})}),(0,d.jsxs)("div",{children:[null!==t.house&&(0,d.jsx)("p",{className:"m-0 text-capitalize",children:null===t.tag?(0,d.jsx)("strong",{children:t.house}):(0,d.jsx)("span",{children:t.house})}),(0,d.jsx)("p",{className:"m-0 text-capitalize text-sm08",children:t.address})]})]}),(0,d.jsx)("div",{children:!this.props.fromCartPage&&this.props.deleteButton&&(0,d.jsx)(o.Fragment,{children:e.data.default_address_id!==t.id&&(0,d.jsx)("button",{className:"btn btn-sm pull-right btn-address-default p-0 m-0 btn-delete-address",style:{border:"0",right:"0px",fontSize:"1.3rem",zIndex:2},children:(0,d.jsx)("i",{className:"si si-trash",style:{fontSize:"1.3rem"},onClick:this.handleDropdown})})})}),(0,d.jsx)(r(),{duration:500,hasTouch:!0})]}),(0,d.jsx)(n.A,{id:"simple-menu",keepMounted:!0,anchorEl:this.state.dropdownItem,open:Boolean(this.state.dropdownItem),onClose:this.handleDropdownClose,TransitionComponent:i.A,MenuListProps:{disablePadding:!0},elevation:3,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,d.jsx)(l.A,{onClick:()=>{this.props.handleDeleteAddress(t.id),this.handleDropdownClose()},children:localStorage.getItem("deleteAddressText")})})]})}}const h=c},726:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var o=s(9950),a=s(7889),r=s.n(a),n=s(6850),l=s(2515),i=s(8858),d=s(1580),c=s.n(d),h=s(4414);class p extends o.Component{render(){const{loading:e,locations:t,handlePopularLocationClick:s}=this.props;return(0,h.jsx)(o.Fragment,{children:(0,h.jsx)("div",{className:"p-15 mt-15",children:e?(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)("h1",{className:"text-muted h4",children:localStorage.getItem("searchPopularPlaces")}),(0,h.jsxs)(i.Ay,{height:160,width:400,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb",children:[(0,h.jsx)("rect",{x:"0",y:"0",rx:"15",ry:"15",width:"125",height:"30"}),(0,h.jsx)("rect",{x:"135",y:"0",rx:"15",ry:"15",width:"100",height:"30"}),(0,h.jsx)("rect",{x:"245",y:"0",rx:"15",ry:"15",width:"110",height:"30"}),(0,h.jsx)("rect",{x:"0",y:"40",rx:"15",ry:"15",width:"85",height:"30"}),(0,h.jsx)("rect",{x:"95",y:"40",rx:"15",ry:"15",width:"125",height:"30"})]})]}):(0,h.jsxs)(o.Fragment,{children:[t.length>0&&(0,h.jsx)("h1",{className:"text-muted h4",children:localStorage.getItem("searchPopularPlaces")}),t.map(((e,t)=>(0,h.jsx)(r(),{top:!0,delay:80*t,children:(0,h.jsxs)("button",{type:"button",className:"btn btn-rounded btn-alt-secondary btn-md mb-15 mr-15",style:{position:"relative"},onClick:()=>{s(e)},children:[(0,h.jsx)(c(),{duration:"500"}),e.name]})},e.id)))]})})})}}const u=p;var g=s(8429),m=s(8341),x=s(6087),j=s(8974),y=s(9351),f=s(2697),S=s(273);class _ extends o.Component{constructor(){super(...arguments),this.state={google_script_loaded:!1,loading_popular_location:!0,gps_loading:!1},this.handleSetDefaultAddress=(e,t)=>{const{user:s}=this.props;s.success&&this.props.setDefaultAddress(s.data.id,e,s.data.auth_token).then((()=>{new Promise((e=>{const s={lat:t.latitude,lng:t.longitude,address:t.address,house:t.house,tag:t.tag};localStorage.setItem("userSetAddress",JSON.stringify(s)),e("Address Saved")})).then((()=>{"1"===localStorage.getItem("fromCart")?(localStorage.removeItem("fromCart"),this.context.router.history.push("/cart")):(this.props.clearRestaurantList(),this.context.router.history.push("/"))}))}))},this.handlePopularLocationClick=e=>{const t={lat:e.latitude,lng:e.longitude,address:e.name,house:null,tag:null,businessLocation:!0};localStorage.setItem("userSetAddress",JSON.stringify(t));new Promise((e=>{localStorage.setItem("userSetAddress",JSON.stringify(t)),localStorage.setItem("userAlreadySelectedLocation","true"),e("Location Saved")})).then((()=>{window.location.replace("/")}))},this.handleGeoLocationClick=e=>{new Promise((t=>{localStorage.setItem("geoLocation",JSON.stringify(e[0])),t("GeoLocation Saved")})).then((()=>{this.context.router.history.push("/my-location")}))}}componentDidMount(){this.props.getPopularLocations(),this.searchInput&&this.searchInput.focus();if(!document.getElementById("googleMaps")){const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key="+localStorage.getItem("googleApiKey")+"&libraries=places",e.id="googleMaps",document.body.appendChild(e),e.onload=()=>{this.setState({google_script_loaded:!0})}}const{user:e}=this.props;e.success&&this.props.getAddresses(e.data.id,e.data.auth_token,this.state.restaurant_id)}componentWillUnmount(){const e=document.getElementById("googleMaps");e&&e.parentNode.removeChild(e)}componentWillReceiveProps(e){this.props.popular_locations!==e.popular_locations&&this.setState({loading_popular_location:!1})}render(){if(window.innerWidth>768)return(0,h.jsx)(g.C5,{to:"/"});if(null===localStorage.getItem("storeColor"))return(0,h.jsx)(g.C5,{to:"/"});const{user:e,popular_locations:t,addresses:s}=this.props;return(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)(l.A,{seotitle:localStorage.getItem("seoMetaTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),(0,h.jsx)("div",{className:"col-12 p-0 pt-0",children:this.state.google_script_loaded&&(0,h.jsx)(n.Ay,{debounce:750,withSessionToken:!0,loader:(0,h.jsx)("img",{src:"/assets/img/various/spinner.svg",className:"location-loading-spinner",alt:"loading"}),renderInput:e=>(0,h.jsxs)("div",{className:"input-location-icon-field",children:[(0,h.jsx)("i",{className:"si si-magnifier"}),(0,h.jsxs)("div",{className:"input-group-prepend",children:[(0,h.jsxs)("button",{type:"button",className:"btn search-navs-btns location-back-button",style:{position:"relative"},onClick:()=>this.context.router.history.goBack(),children:[(0,h.jsx)("i",{className:"si si-arrow-left"}),(0,h.jsx)(c(),{duration:"500"})]}),(0,h.jsx)("input",{...e,className:"form-control search-input",placeholder:localStorage.getItem("searchAreaPlaceholder"),ref:e=>{this.searchInput=e}})]})]}),renderSuggestions:(e,t,s)=>(0,h.jsxs)("div",{className:"location-suggestions-container",children:[t.map(((e,t)=>(0,h.jsx)(r(),{top:!0,delay:50*t,children:(0,h.jsxs)("div",{className:"location-suggestion",onClick:t=>{s(e,t),(0,n.y8)(e.place_id).then((e=>this.handleGeoLocationClick(e))).catch((e=>console.error(e)))},children:[(0,h.jsx)("span",{className:"location-main-name",children:e.structured_formatting.main_text}),(0,h.jsx)("br",{}),(0,h.jsx)("span",{className:"location-secondary-name",children:e.structured_formatting.secondary_text})]})},e.id))),(0,h.jsx)("img",{src:"/assets/img/various/powered_by_google_on_white.png",alt:"powered by Google",className:"pl-15"})]})})}),(0,h.jsx)(S.A,{fetchGpsAutomaticallyAndroid:!1}),null===localStorage.getItem("fromCart")&&(0,h.jsx)(u,{loading:this.state.loading_popular_location,handlePopularLocationClick:this.handlePopularLocationClick,locations:t}),e.success&&s.length>0&&(0,h.jsx)(o.Fragment,{children:(0,h.jsxs)("div",{className:"p-15 mt-10 location-saved-address",children:[(0,h.jsx)("h1",{className:"text-muted h4",children:localStorage.getItem("locationSavedAddresses")}),s.map((t=>(0,h.jsx)(f.A,{handleDeleteAddress:this.handleDeleteAddress,deleteButton:!1,address:t,user:e,fromCartPage:!1,handleSetDefaultAddress:this.handleSetDefaultAddress},t.id)))]})})]})}}_.contextTypes={router:()=>null};const b=(0,m.Ng)((e=>({user:e.user.user,popular_locations:e.popular_locations.popular_locations,addresses:e.addresses.addresses})),{getPopularLocations:x.c,getAddresses:j.tS,setDefaultAddress:j.y_,clearRestaurantList:y.Bg})(_)},8974:(e,t,s)=>{s.d(t,{Ex:()=>l,ab:()=>i,tS:()=>n,y_:()=>d});var o=s(8262),a=s(1753),r=s(8469);const n=(e,t,s)=>n=>{r.A.post(a.ss,{user_id:e,token:t,restaurant_id:s}).then((e=>{const t=e.data;return n({type:o.oz,payload:t})})).catch((function(e){console.log(e)}))},l=(e,t,s,n,l,i,d,c)=>h=>{r.A.post(a.RA,{token:t,user_id:e,latitude:s,longitude:n,address:l,house:i,tag:d,get_only_default_address:c}).then((e=>{const t=e.data;return h({type:o.b8,payload:t})})).catch((function(e){console.log(e)}))},i=(e,t,s)=>n=>{r.A.post(a.pP,{token:s,user_id:e,address_id:t}).then((e=>{const t=e.data;return n({type:o.fJ,payload:t})})).catch((function(e){console.log(e)}))},d=(e,t,s)=>n=>r.A.post(a.tv,{token:s,user_id:e,address_id:t}).then((e=>{const t=e.data;return n({type:o.Zm,payload:t})})).catch((function(e){console.log(e)}))}}]);