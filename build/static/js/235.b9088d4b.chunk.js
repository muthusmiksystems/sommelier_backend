"use strict";(self.webpackChunksommelier=self.webpackChunksommelier||[]).push([[235],{2235:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var r=s(9950),a=s(398),l=s(8469),o=s(1753);var n=s(9097),c=s(2074),i=s(1580),m=s.n(i),h=s(3939),g=s(4414);class d extends r.Component{render(){const{items:e}=this.props;return(0,g.jsx)(r.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white mb-50 mt-10",children:[(0,g.jsx)("h5",{className:"px-15 mb-1 text-muted",children:localStorage.getItem("exploreItemsText")}),e.map((e=>(0,g.jsx)("div",{className:"col-xs-12 col-sm-12 restaurant-block",children:(0,g.jsxs)(c.N_,{to:{pathname:"../stores/"+e.restaurant.slug+"/"+e.id,state:{fromExplorePage:!0}},className:"block block-link-shadow text-center light-bottom-border",children:[null!==e.image&&(0,g.jsx)("div",{className:"block-content block-content-full pt-2",children:(0,g.jsx)(h.Ay,{children:(0,g.jsx)("img",{src:e.image,alt:e.name,className:"restaurant-image mt-0"})})}),(0,g.jsxs)("div",{className:"block-content block-content-full restaurant-info ".concat(null===e.image&&"pl-20"),children:[(0,g.jsxs)("div",{className:"font-w600 mb-5",children:["true"===localStorage.getItem("showVegNonVegBadge")&&null!==e.is_veg&&(0,g.jsx)(r.Fragment,{children:e.is_veg?(0,g.jsx)("img",{src:"/assets/img/various/veg-icon-bg.png",alt:"Veg",style:{width:"1rem"},className:"mr-1"}):(0,g.jsx)("img",{src:"/assets/img/various/non-veg-icon-bg.png",alt:"Non-Veg",style:{width:"1rem"},className:"mr-1"})}),e.name]}),(0,g.jsxs)("div",{className:"font-size-sm font-w600 truncate-text",children:[(0,g.jsx)("span",{className:"text-muted",children:localStorage.getItem("exlporeByRestaurantText")})," ",(0,g.jsx)("span",{style:{color:localStorage.getItem("storeColor")},children:e.restaurant.name})]}),(0,g.jsxs)("div",{className:"font-size-sm font-w600 text-muted",children:["left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.price,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")]}),(0,g.jsx)("br",{})]}),(0,g.jsx)(m(),{duration:"500"})]})},e.id)))]})})}}const x=d;var u=s(2515),p=s(8429);class j extends r.Component{constructor(){super(...arguments),this.state={restaurant:""},this.handleInputChange=e=>{this.setState({restaurant:e.target.value}),this.props.searchFunction(e.target.value)}}componentDidMount(){this.searchInput.focus()}render(){return(0,g.jsx)(r.Fragment,{children:(0,g.jsx)("div",{className:"col-12 p-0",children:(0,g.jsx)("div",{className:"block m-0",children:(0,g.jsx)("div",{className:"block-content p-0",children:(0,g.jsxs)("div",{className:"input-group search-box",children:[(0,g.jsx)("div",{className:"input-group-prepend",children:(0,g.jsxs)("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:this.context.router.history.goBack,children:[(0,g.jsx)("i",{className:"si si-arrow-left"}),(0,g.jsx)(m(),{duration:"500"})]})}),(0,g.jsx)("input",{type:"text",className:"form-control search-input",placeholder:localStorage.getItem("restaurantSearchPlaceholder"),value:this.state.restaurant,onChange:this.handleInputChange,ref:e=>{this.searchInput=e}}),(0,g.jsx)("div",{className:"input-group-append",children:(0,g.jsxs)("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"},children:[(0,g.jsx)("i",{className:"si si-magnifier"}),(0,g.jsx)(m(),{duration:"500"})]})})]})})})})})}}j.contextTypes={router:()=>null};const y=j;var v=s(3507);class b extends r.Component{render(){const{restaurants:e}=this.props;return(0,g.jsx)(r.Fragment,{children:(0,g.jsxs)("div",{className:"bg-white mb-50 mt-30",children:[(0,g.jsx)("h5",{className:"px-15 mb-1 text-muted",children:localStorage.getItem("exploreRestautantsText")}),e.map((e=>(0,g.jsx)("div",{className:"col-xs-12 col-sm-12 restaurant-block",children:(0,g.jsxs)(v.A,{to:"../stores/"+e.slug,delay:200,className:"block block-link-shadow text-center light-bottom-border",children:[(0,g.jsx)("div",{className:"block-content block-content-full pt-2",children:(0,g.jsx)(h.Ay,{children:(0,g.jsx)("img",{src:e.image,alt:e.name,className:"restaurant-image mt-0 ".concat(!e.is_active&&"restaurant-not-active")})})}),(0,g.jsxs)("div",{className:"block-content block-content-full restaurant-info",children:[(0,g.jsx)("h4",{className:"font-w600 mb-5 text-dark",children:e.name}),(0,g.jsx)("div",{className:"font-size-sm text-muted truncate-text text-muted",children:e.description}),!e.is_active&&(0,g.jsx)("span",{className:"restaurant-not-active-msg",children:localStorage.getItem("restaurantNotActiveMsg")}),(0,g.jsxs)("div",{className:"text-center restaurant-meta mt-5 d-flex align-items-center justify-content-between text-muted",children:[(0,g.jsxs)("div",{className:"col-2 p-0 text-left store-rating-block",children:[(0,g.jsx)("i",{className:"fa fa-star pr-1 ".concat(!e.is_active&&"restaurant-not-active"),style:{color:localStorage.getItem("storeColor")}})," ","0"===e.avgRating?e.rating:e.avgRating]}),(0,g.jsxs)("div",{className:"col-4 p-0 text-center store-distance-block",children:[(0,g.jsx)("i",{className:"si si-clock"})," ",e.delivery_time," ",localStorage.getItem("homePageMinsText")]}),(0,g.jsxs)("div",{className:"col-6 p-0 text-center store-avgprice-block",children:[(0,g.jsx)("i",{className:"si si-wallet"})," ","left"===localStorage.getItem("currencySymbolAlign")&&(0,g.jsxs)(r.Fragment,{children:[localStorage.getItem("currencyFormat"),e.price_range," "]}),"right"===localStorage.getItem("currencySymbolAlign")&&(0,g.jsxs)(r.Fragment,{children:[e.price_range,localStorage.getItem("currencyFormat")," "]}),localStorage.getItem("homePageForTwoText")]})]})]}),(0,g.jsx)(m(),{duration:"500"})]})},e.id)))]})})}}const N=b;var S=s(8341),f=s(65),w=s(8858);class I extends r.Component{constructor(){super(...arguments),this.state={queryLengthError:!1,loading:!1,showBgImage:!0,nothingFound:!1},this.handleRestaurantSearch=(0,f.s)((e=>{e.length>=3?(this.props.searchRestaurants(JSON.parse(localStorage.getItem("userSetAddress")).lat,JSON.parse(localStorage.getItem("userSetAddress")).lng,e),this.setState({queryLengthError:!1,loading:!0,nothingFound:!1})):this.setState({queryLengthError:!0})}),400)}componentDidMount(){document.querySelectorAll("a[href='/explore']")[0]&&document.querySelectorAll("a[href='/explore']")[0].classList.add("no-click")}componentWillUnmount(){document.querySelectorAll("a[href='/explore']")[0]&&document.querySelectorAll("a[href='/explore']")[0].classList.remove("no-click")}componentWillReceiveProps(e){this.props.searches!==e.searches&&this.setState({loading:!1}),e.searches&&(0===e.searches.restaurants.length&&0===e.searches.items.length?this.setState({showBgImage:!0,nothingFound:!0}):this.setState({showBgImage:!1,nothingFound:!1}))}render(){if(window.innerWidth>768)return(0,g.jsx)(p.C5,{to:"/"});if(null===localStorage.getItem("storeColor"))return(0,g.jsx)(p.C5,{to:"/"});const{searches:e}=this.props;return(0,g.jsxs)(r.Fragment,{children:[(0,g.jsx)(u.A,{seotitle:localStorage.getItem("seoMetaTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),this.state.queryLengthError&&(0,g.jsx)("div",{className:"auth-error",style:{marginBottom:"4rem"},children:(0,g.jsx)("div",{className:"",children:localStorage.getItem("searchAtleastThreeCharsMsg")})}),(0,g.jsx)(y,{searchFunction:this.handleRestaurantSearch}),this.state.loading&&(0,g.jsxs)(w.Ay,{height:window.innerHeight,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb",children:[(0,g.jsx)("rect",{x:"20",y:"20",rx:"4",ry:"4",width:"80",height:"78"}),(0,g.jsx)("rect",{x:"144",y:"35",rx:"0",ry:"0",width:"115",height:"18"}),(0,g.jsx)("rect",{x:"144",y:"65",rx:"0",ry:"0",width:"165",height:"16"}),(0,g.jsx)("rect",{x:"20",y:"145",rx:"4",ry:"4",width:"80",height:"78"}),(0,g.jsx)("rect",{x:"144",y:"160",rx:"0",ry:"0",width:"115",height:"18"}),(0,g.jsx)("rect",{x:"144",y:"190",rx:"0",ry:"0",width:"165",height:"16"}),(0,g.jsx)("rect",{x:"20",y:"270",rx:"4",ry:"4",width:"80",height:"78"}),(0,g.jsx)("rect",{x:"144",y:"285",rx:"0",ry:"0",width:"115",height:"18"}),(0,g.jsx)("rect",{x:"144",y:"315",rx:"0",ry:"0",width:"165",height:"16"})]}),e&&e.restaurants&&e.restaurants.length>0&&(0,g.jsx)(N,{restaurants:e.restaurants}),e&&e.items&&e.items.length>0&&(0,g.jsx)(x,{items:e.items}),this.state.showBgImage&&(0,g.jsx)("div",{className:"d-flex justify-content-center mt-100",children:(0,g.jsx)("img",{className:"img-fluid explore-bg",src:"/assets/img/various/explore-bg.png",alt:localStorage.getItem("restaurantSearchPlaceholder")})}),this.state.nothingFound&&(0,g.jsx)("div",{className:"auth-error",style:{marginBottom:"4rem"},children:(0,g.jsx)("div",{className:"error-shake",children:localStorage.getItem("exploreNoResults")})}),(0,g.jsx)(n.A,{active_explore:!0})]})}}const k=(0,S.Ng)((e=>({searches:e.searches.restaurants})),{searchRestaurants:(e,t,s)=>r=>{l.A.post(o.ig,{latitude:e,longitude:t,q:s}).then((e=>{const t=e.data;return r({type:a.e,payload:t})})).catch((function(e){console.log(e)}))},clearSearch:()=>e=>(console.log("Search Cleared"),e({type:a.T,payload:[]}))})(I)},65:(e,t,s)=>{s.d(t,{s:()=>r});const r=(e,t)=>{let s;return function(){clearTimeout(s),s=setTimeout((()=>e.apply(this,arguments)),t)}}}}]);