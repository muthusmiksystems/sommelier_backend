"use strict";(self.webpackChunksommelier=self.webpackChunksommelier||[]).push([[185],{185:(e,t,s)=>{s.r(t),s.d(t,{default:()=>U});var a=s(9950),n=s(9097),o=s(8341),r=s(2920),i=s(8854),l=s(4414);class c extends a.Component{constructor(){super(...arguments),this.state={open:!1},this.handleClose=()=>{this.setState({open:!1})}}componentWillReceiveProps(e){!1===e.confirmLogoutOpen&&this.setState({open:!1}),!0===e.confirmLogoutOpen&&this.setState({open:!0})}render(){return(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(i.A,{fullWidth:!0,fullScreen:!1,open:this.state.open,onClose:this.handleClose,style:{width:"200px",margin:"auto"},PaperProps:{style:{backgroundColor:"#fff",borderRadius:"10px"}},children:(0,l.jsx)("div",{className:"container",style:{borderRadius:"10px"},onClick:this.props.handleLogout,children:(0,l.jsxs)("div",{className:"row d-flex justify-content-center mt-30 mb-10 align-items-center flex-column",children:[(0,l.jsx)("i",{className:"si si-power logout-icon",style:{fontSize:"3.2rem"}}),(0,l.jsx)("div",{className:"d-flex justify-content-center my-10 text-uppercase font-w700",children:localStorage.getItem("accountLogout")})]})})})})}}const d=c;var u=s(1580),h=s.n(u);class p extends a.Component{constructor(){super(...arguments),this.state={confirmLogoutPopupOpen:!1},this.openConfirmLogout=()=>{this.setState({confirmLogoutPopupOpen:!0})},this.handleLogout=()=>{this.props.logoutUser()}}render(){return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(d,{confirmLogoutOpen:this.state.confirmLogoutPopupOpen,handleLogout:()=>this.handleLogout()}),(0,l.jsxs)("div",{className:"account-logout mx-15 position-relative",onClick:this.openConfirmLogout,children:[(0,l.jsxs)("div",{className:"flex-auto logout-text",children:[(0,l.jsx)("i",{className:"si si-power logout-icon mr-1"})," ",localStorage.getItem("accountLogout")]}),(0,l.jsx)(h(),{duration:"500"})]})]})}}const m=(0,o.Ng)((()=>({})),{logoutUser:r.y4})(p);var g=s(2515),x=s(8429),v=s(8870);class j extends a.Component{constructor(){super(...arguments),this.state={open:!1},this.handleClose=()=>{this.setState({open:!1})}}componentWillReceiveProps(e){!1===e.avatarPopupOpen&&this.setState({open:!1}),!0===e.avatarPopupOpen&&this.setState({open:!0})}render(){return(0,l.jsx)(a.Fragment,{children:(0,l.jsxs)(i.A,{maxWidth:!1,fullWidth:!0,fullScreen:!0,open:this.state.open,onClose:this.handleClose,children:[(0,l.jsx)(v.A,{id:"responsive-dialog-title",children:localStorage.getItem("chooseAvatarText")}),(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user1.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user1"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user2.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user2"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user3.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user3"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user4.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user4"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user5.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user5"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user6.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user6"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user7.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user7"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user8.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user8"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user9.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user9"})}),(0,l.jsx)("div",{className:"col-3",children:(0,l.jsx)("img",{src:"/assets/img/various/avatars/user10.gif",alt:"Avatar",style:{width:"85px"},onClick:this.props.handleAvatarChange,"data-name":"user10"})})]}),(0,l.jsx)("div",{className:"d-flex justify-content-center mt-50",children:(0,l.jsx)("button",{className:"btn btn-default btn-md",onClick:this.handleClose,children:localStorage.getItem("cancelGoBackBtn")})})]})]})})}}const f=j;var N=s(5136);class y extends a.Component{constructor(){super(...arguments),this.state={avatarPopupOpen:!1,loading:!1},this.openAvatarPopup=()=>{this.setState({avatarPopupOpen:!0})},this.handleAvatarChange=e=>{this.setState({loading:!0}),this.props.changeAvatar(this.props.user_info.auth_token,e.target.getAttribute("data-name")).then((e=>{e&&e.success&&(this.props.updateUserInfo(),this.setState({loading:!1}))}))}}componentWillReceiveProps(e){this.setState({avatarPopupOpen:e.avatarPopup})}render(){const{user_info:e}=this.props;return(0,l.jsxs)(a.Fragment,{children:[this.state.loading&&(0,l.jsx)(N.A,{}),(0,l.jsx)(f,{avatarPopupOpen:this.state.avatarPopupOpen,handleAvatarChange:this.handleAvatarChange}),(0,l.jsx)("div",{className:"block-content block-content-full bg-light",children:(0,l.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"font-w600 mb-10",children:e.name}),(0,l.jsxs)("p",{className:"text-muted",children:[e.phone," ",(0,l.jsx)("br",{})," ",e.email]})]}),(0,l.jsx)("div",{children:null==e.avatar?(0,l.jsx)("img",{src:"/assets/img/various/avatars/user2.gif",alt:e.name,style:{width:"100px"},onClick:this.openAvatarPopup}):(0,l.jsx)("img",{src:"/assets/img/various/avatars/".concat(e.avatar,".gif"),alt:e.name,style:{width:"100px"},onClick:this.openAvatarPopup})})]})})]})}}const C=(0,o.Ng)((()=>({})),{changeAvatar:r.YB})(y);var b=s(3507),S=s(7813);class A extends a.Component{constructor(){super(...arguments),this.state={open:!1},this.handlePopupOpen=()=>{this.setState({open:!0})},this.handlePopupClose=()=>{this.setState({open:!1})}}render(){const{page:e}=this.props;return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsxs)("div",{className:"pages-badge mr-3 mb-2 position-relative",onClick:this.handlePopupOpen,children:[e.name,(0,l.jsx)(h(),{duration:"500"})]}),(0,l.jsx)(S.A,{open:this.state.open,onClose:this.handlePopupClose,closeIconSize:32,children:(0,l.jsx)("div",{className:"mt-50",dangerouslySetInnerHTML:{__html:e.body}})})]})}}const I=A;class k extends a.Component{constructor(){super(...arguments),this.state={vatNumber:null},this.handleInputChange=e=>{this.setState({vatNumber:e.target.value})},this.saveVATNumber=()=>{const{user:e}=this.props;this.props.saveVATNumber(e.data.auth_token,this.state.vatNumber).then((t=>{t&&(this.props.updateUserInfo(e.data.id,e.data.auth_token),this.props.handlePopup())}))}}render(){const{user:e}=this.props;return(0,l.jsx)(a.Fragment,{children:(0,l.jsx)(i.A,{fullWidth:!0,fullScreen:!1,open:this.props.open,onClose:this.props.handlePopup,style:{width:"100%",margin:"auto"},PaperProps:{style:{backgroundColor:"#fff",borderRadius:"4px"}},children:(0,l.jsx)("div",{className:"container",style:{borderRadius:"5px"},children:(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)("div",{className:"col-12 py-3 d-flex justify-content-between align-items-center",children:(0,l.jsx)("h1",{className:"mt-2 mb-0 font-weight-black h4 text-center",children:localStorage.getItem("accountTaxVatText")})}),(0,l.jsx)("div",{className:"form-group",children:(0,l.jsxs)("div",{className:"col-md-9 pb-5",children:[(0,l.jsx)("input",{type:"text",name:"vatnumber",defaultValue:e.data.tax_number?e.data.tax_number:this.state.vatNumber,onChange:this.handleInputChange,className:"form-control edit-address-input",autoFocus:!0}),(0,l.jsx)("div",{className:"mt-20 button-block",children:(0,l.jsx)("button",{type:"submit",className:"btn btn-md btn-block text-white",style:{backgroundColor:localStorage.getItem("storeColor"),height:"3rem",textTransform:"uppercase"},disabled:""===this.state.vatNumber,onClick:this.saveVATNumber,children:localStorage.getItem("customerVatSave")})})]})})]})})})})}}const P=(0,o.Ng)((e=>({user:e.user.user,vat_number:e.user.vat_number})),{updateUserInfo:r.bu,saveVATNumber:r.ky})(k);var w=s(7889),L=s.n(w);class T extends a.Component{constructor(){super(...arguments),this.state={open:!1},this.handleVATNumber=()=>{this.setState({open:!this.state.open})}}render(){const{pages:e}=this.props;return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)("h6",{className:"mx-15 mt-3",children:localStorage.getItem("accountMyAccount")}),(0,l.jsxs)("div",{className:"account-menu ml-15 my-3",children:[(0,l.jsx)("div",{className:"my-account-menu-item-block col p-0 mr-3",children:(0,l.jsxs)(b.A,{to:"/my-addresses",delay:200,children:[(0,l.jsx)("div",{className:"text-center my-account-menu-item",children:(0,l.jsx)(L(),{top:!0,delay:100,children:(0,l.jsx)("div",{children:(0,l.jsx)("i",{className:"si si-home"})})})}),(0,l.jsx)("div",{className:"text-center",children:localStorage.getItem("accountManageAddress")}),(0,l.jsx)(h(),{duration:"500"})]})}),(0,l.jsx)("div",{className:"my-account-menu-item-block col p-0 mr-3",children:(0,l.jsxs)(b.A,{to:"/my-orders",delay:200,children:[(0,l.jsx)("div",{className:"text-center my-account-menu-item",children:(0,l.jsx)(L(),{top:!0,delay:250,children:(0,l.jsx)("div",{children:(0,l.jsx)("i",{className:"si si-bag"})})})}),(0,l.jsx)("div",{className:"text-center",children:localStorage.getItem("accountMyOrders")}),(0,l.jsx)(h(),{duration:"500"})]})}),(0,l.jsx)("div",{className:"my-account-menu-item-block col p-0 mr-3",children:(0,l.jsxs)(b.A,{to:"/my-wallet",delay:200,children:[(0,l.jsx)("div",{className:"text-center my-account-menu-item",children:(0,l.jsx)(L(),{top:!0,delay:350,children:(0,l.jsx)("div",{children:(0,l.jsx)("i",{className:"si si-wallet"})})})}),(0,l.jsx)("div",{className:"text-center",children:localStorage.getItem("accountMyWallet")}),(0,l.jsx)(h(),{duration:"500"})]})}),(0,l.jsx)("div",{className:"my-account-menu-item-block col p-0 mr-3",children:(0,l.jsxs)(b.A,{to:"/my-favorite-stores",delay:200,children:[(0,l.jsx)("div",{className:"text-center my-account-menu-item",children:(0,l.jsx)(L(),{top:!0,delay:450,children:(0,l.jsx)("div",{children:(0,l.jsx)("i",{className:"si si-heart"})})})}),(0,l.jsx)("div",{className:"text-center",children:localStorage.getItem("accountMyFavouriteStores")}),(0,l.jsx)(h(),{duration:"500"})]})}),"true"===localStorage.getItem("showCustomerVatNumber")&&(0,l.jsxs)("div",{className:"my-account-menu-item-block col p-0 mr-3",onClick:this.handleVATNumber,children:[(0,l.jsx)("div",{className:"text-center my-account-menu-item",children:(0,l.jsx)(L(),{top:!0,delay:550,children:(0,l.jsx)("div",{children:(0,l.jsx)("i",{className:"si si-tag"})})})}),(0,l.jsx)("div",{className:"text-center",children:localStorage.getItem("accountTaxVatText")}),(0,l.jsx)(h(),{duration:"500"})]})]}),(0,l.jsxs)("div",{className:"mx-15 my-3",children:[(0,l.jsx)("h6",{children:localStorage.getItem("accountHelpFaq")}),(0,l.jsx)("div",{className:"account-pages",children:e.map((e=>(0,l.jsx)("div",{children:(0,l.jsx)(I,{page:e})},e.id)))})]}),(0,l.jsx)(P,{handlePopup:this.handleVATNumber,open:this.state.open,user_info:this.props.user_info})]})}}const O=T;var _=s(778),F=s(9085);class V extends a.Component{constructor(){super(...arguments),this.state={avatarPopup:!1},this.updateUserInfo=()=>{const{user:e}=this.props;this.props.updateUserInfo(e.data.id,e.data.auth_token).then((e=>{e&&e.payload.data.id&&this.setState({avatarPopup:!1})}))},this.handleOnChange=e=>{this.props.getSingleLanguageData(e.target.value),localStorage.setItem("userPreferedLanguage",e.target.value)}}componentDidMount(){const{user:e}=this.props;null!==localStorage.getItem("storeColor")&&e.success&&(this.props.getPages(),this.updateUserInfo(e))}componentWillReceiveProps(e){if(this.props.languages!==e.languages)if(localStorage.getItem("userPreferedLanguage"))this.props.getSingleLanguageData(localStorage.getItem("userPreferedLanguage"));else if(e.languages.length){console.log("Fetching Translation Data...");const t=e.languages.filter((e=>1===e.is_default))[0].id;this.props.getSingleLanguageData(t)}}render(){if(window.innerWidth>768)return(0,l.jsx)(x.C5,{to:"/"});if(null===localStorage.getItem("storeColor"))return(0,l.jsx)(x.C5,{to:"/"});const{user:e,pages:t}=this.props;if(!e.success)return(0,l.jsx)(x.C5,{to:"/login"});const s=this.props.languages;return(0,l.jsxs)(a.Fragment,{children:[(0,l.jsx)(g.A,{seotitle:localStorage.getItem("footerAccount"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),(0,l.jsx)(C,{user_info:e.data,updateUserInfo:this.updateUserInfo,avatarPopup:this.state.avatarPopup}),(0,l.jsx)(O,{pages:t}),(0,l.jsx)(m,{}),(0,l.jsx)(n.A,{active_account:!0}),s&&s.length>1&&(0,l.jsxs)("div",{className:"mt-4 d-flex align-items-center justify-content-center mb-100",children:[(0,l.jsx)("div",{className:"mr-2",children:localStorage.getItem("changeLanguageText")}),(0,l.jsx)("select",{onChange:this.handleOnChange,defaultValue:localStorage.getItem("userPreferedLanguage")?localStorage.getItem("userPreferedLanguage"):s.filter((e=>1===e.is_default))[0].id,className:"form-control language-select",children:s.map((e=>(0,l.jsx)("option",{value:e.id,children:e.language_name},e.id)))})]}),(0,l.jsx)("div",{className:"mb-100"})]})}}const U=(0,o.Ng)((e=>({user:e.user.user,pages:e.pages.pages,languages:e.languages.languages,language:e.languages.language})),{getPages:_.X5,getSingleLanguageData:F.l,updateUserInfo:r.bu})(V)},778:(e,t,s)=>{s.d(t,{En:()=>i,X5:()=>r,fT:()=>l});var a=s(7890),n=s(1753),o=s(8469);const r=()=>e=>{o.A.post(n.Ae).then((t=>{const s=t.data;return e({type:a.eQ,payload:s})})).catch((function(e){console.log(e)}))},i=e=>t=>{o.A.post(n.yS,{slug:e}).then((e=>{const s=e.data;return t({type:a.iT,payload:s})})).catch((function(e){console.log(e)}))},l=()=>e=>e({type:a.XG,payload:[]})}}]);