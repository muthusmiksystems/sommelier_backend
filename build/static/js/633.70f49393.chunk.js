"use strict";(self.webpackChunksommelier=self.webpackChunksommelier||[]).push([[633],{8633:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(9950),o=a(2515),r=a(8429),l=a(8341),n=a(513),i=a(576),d=a(9085),g=a(5136),c=a(413),u=a.n(c),m=a(4414);class p extends s.Component{constructor(){super(...arguments),this.state={loading:!1,email:"",password:"",error:!1},this.handleOnChange=e=>{this.props.getSingleLanguageData(e.target.value),localStorage.setItem("userPreferedLanguage",e.target.value)},this.handleInputEmail=e=>{this.setState({email:e.target.value.trim()})},this.handleInputPassword=e=>{this.setState({password:e.target.value})},this.handleLogin=e=>{e.preventDefault(),this.setState({loading:!0}),this.props.loginDeliveryUser(this.state.email,this.state.password)}}componentDidMount(){this.props.getSettings(),this.props.getAllLanguages(),document.getElementsByTagName("body")[0].classList.remove("bg-grey"),document.getElementsByTagName("body")[0].classList.add("delivery-dark-bg")}componentWillReceiveProps(e){const{delivery_user:t}=this.props;if(t!==e.delivery_user&&(this.setState({loading:!1}),!1===e.delivery_user.success&&this.setState({error:!0})),e.delivery_user.success&&"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.registerFcm(e.delivery_user.data.auth_token,e.delivery_user.data.id),this.props.languages!==e.languages)if(localStorage.getItem("userPreferedLanguage"))this.props.getSingleLanguageData(localStorage.getItem("userPreferedLanguage"));else if(e.languages.length){const t=e.languages.filter((e=>1===e.is_default))[0].id;this.props.getSingleLanguageData(t)}}render(){if(window.innerWidth>768)return(0,m.jsx)(r.C5,{to:"/"});const{delivery_user:e}=this.props;return e.success?(0,m.jsx)(r.C5,{to:"/delivery"}):(0,m.jsxs)(s.Fragment,{children:[(0,m.jsx)(o.A,{seotitle:"Login",seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),this.state.error&&(0,m.jsx)("div",{className:"auth-error",children:(0,m.jsx)("div",{className:"error-shake",children:localStorage.getItem("emailPassDonotMatch")})}),this.state.loading&&(0,m.jsx)(g.A,{}),(0,m.jsxs)("div",{className:"mt-50 mb-50",children:[(0,m.jsxs)("div",{className:"text-center clipped-delivery-login-header",children:[(0,m.jsx)("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120",className:"delivery-login-logo"}),(0,m.jsx)(u(),{left:!0,duration:1e3,children:(0,m.jsx)("img",{src:"/assets/img/various/delivery-bike.svg",alt:this.props.title,className:"delivery-bike-img"})})]}),(0,m.jsxs)("div",{className:"delivery-login-texts px-15 mt-50 pb-10 text-center",children:[(0,m.jsx)("span",{className:"delivery-login-title",children:localStorage.getItem("loginLoginTitle")}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{className:"delivery-login-subtitle",children:localStorage.getItem("loginLoginSubTitle")})]}),(0,m.jsxs)("div",{className:"height-70 delivery-dark-bg",children:[(0,m.jsxs)("form",{onSubmit:this.handleLogin,children:[(0,m.jsxs)("div",{className:"form-group px-15 pt-30",children:[(0,m.jsx)("label",{className:"col-12 edit-address-input-label",children:localStorage.getItem("loginLoginEmailLabel")}),(0,m.jsx)("div",{className:"col-md-9 pb-5",children:(0,m.jsx)("input",{type:"text",name:"email",onChange:this.handleInputEmail,className:"form-control delivery-login-input"})}),(0,m.jsx)("label",{className:"col-12 edit-address-input-label",children:localStorage.getItem("loginLoginPasswordLabel")}),(0,m.jsx)("div",{className:"col-md-9",children:(0,m.jsx)("input",{type:"password",name:"password",onChange:this.handleInputPassword,className:"form-control delivery-login-input"})})]}),(0,m.jsx)("div",{className:"mt-20 px-30 button-block",children:(0,m.jsx)("button",{type:"submit",className:"btn delivery-login-button",style:{backgroundColor:localStorage.getItem("storeColor")},children:localStorage.getItem("loginLoginTitle")})})]}),this.props.languages&&this.props.languages.length>1&&(0,m.jsxs)("div",{className:"mt-100 d-flex align-items-center justify-content-center",children:[(0,m.jsx)("div",{className:"mr-2 edit-address-input-label",children:localStorage.getItem("changeLanguageText")}),(0,m.jsx)("select",{onChange:this.handleOnChange,defaultValue:localStorage.getItem("userPreferedLanguage")?localStorage.getItem("userPreferedLanguage"):this.props.languages.filter((e=>1===e.is_default))[0].id,className:"form-control delivery-language-select",children:this.props.languages.map((e=>(0,m.jsx)("option",{value:e.id,children:e.language_name},e.id)))})]})]})]})]})}}p.contextTypes={router:()=>null};const h=(0,l.Ng)((e=>({delivery_user:e.delivery_user.delivery_user,languages:e.languages.languages,language:e.languages.language})),{loginDeliveryUser:i.$t,getSettings:n.m,getAllLanguages:d.N,getSingleLanguageData:d.l})(p)},576:(e,t,a)=>{a.d(t,{$t:()=>l,Ak:()=>g,Ud:()=>n,nc:()=>i,sB:()=>d});var s=a(3392),o=a(1753),r=a(8469);const l=(e,t)=>a=>{r.A.post(o.V4,{email:e,password:t}).then((e=>{const t=e.data;return a({type:s.Vl,payload:t})})).catch((function(e){console.log(e)}))},n=()=>e=>{e({type:s.oM,payload:[]})},i=(e,t)=>a=>{r.A.post(o.s$,{token:t,user_id:e}).then((e=>{const t={delivery_user:e.data,order_history:e.data.data.orders};return a({type:s.gw,payload:t})})).catch((function(e){console.log(e)}))},d=e=>t=>{t({type:s.v9,payload:e})},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a=>r.A.post(o.H2,{token:e,toggle_status:!0,force_offline:t}).then((e=>{const t={delivery_user:e.data,order_history:e.data.data.orders};return a({type:s.gw,payload:t})})).catch((function(e){console.log(e)}))}},413:(e,t,a)=>{function s(e,t){var a=t.left,s=t.right,o=t.mirror,r=t.opposite,l=(a?1:0)|(s?2:0)|(o?16:0)|(r?32:0)|(e?64:0);if(c.hasOwnProperty(l))return c[l];if(!o!=!(e&&r)){var n=[s,a];a=n[0],s=n[1]}var i=a?"-100%":s?"100%":"0",g=e?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+i+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+i+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return c[l]=(0,d.animation)(g),c[l]}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.defaults,t=e.children,a=(e.out,e.forever),o=e.timeout,r=e.duration,l=void 0===r?d.defaults.duration:r,i=e.delay,g=void 0===i?d.defaults.delay:i,c=e.count,u=void 0===c?d.defaults.count:c,m=function(e,t){var a={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=e[s]);return a}(e,["children","out","forever","timeout","duration","delay","count"]),p={make:s,duration:void 0===o?l:o,delay:g,forever:a,count:u,style:{animationFillMode:"both"}};return m.left,m.right,m.mirror,m.opposite,(0,n.default)(m,p,p,t)}Object.defineProperty(t,"__esModule",{value:!0});var r,l=a(7374),n=(r=l)&&r.__esModule?r:{default:r},i=a(1942),d=a(7244),g={out:i.bool,left:i.bool,right:i.bool,mirror:i.bool,opposite:i.bool,duration:i.number,timeout:i.number,delay:i.number,count:i.number,forever:i.bool},c={};o.propTypes=g,t.default=o,e.exports=t.default}}]);