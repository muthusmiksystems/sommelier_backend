"use strict";(self.webpackChunksommelier=self.webpackChunksommelier||[]).push([[214],{2697:(t,e,s)=>{s.d(e,{A:()=>h});var r=s(9950),a=s(1580),o=s.n(a),n=s(6465),i=s(767),d=s(6534),l=s(4414);class c extends r.Component{constructor(){super(...arguments),this.state={dropdownItem:null},this.handleSetDefaultAddress=(t,e)=>{t.target.classList.contains("si")||this.props.handleSetDefaultAddress(e.id,e)},this.handleDropdown=t=>{this.setState({dropdownItem:t.currentTarget})},this.handleDropdownClose=()=>{this.setState({dropdownItem:null})}}render(){const{user:t,address:e}=this.props;return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("div",{className:!e.is_operational&&this.props.fromCartPage?"bg-white single-address-card d-flex no-click":"bg-white single-address-card d-flex",onClick:t=>this.handleSetDefaultAddress(t,e),style:{position:"relative"},children:[(0,l.jsxs)("div",{className:!e.is_operational&&this.props.fromCartPage?"address-not-usable w-100":"w-100",children:[t.data.default_address_id===e.id?(0,l.jsxs)("button",{className:"btn btn-sm pull-right btn-address-default p-0 m-0",style:{border:"0",right:"0px",fontSize:"1.3rem"},children:[(0,l.jsx)("i",{className:"si si-check",style:{color:localStorage.getItem("storeColor")}}),(0,l.jsx)(o(),{duration:200})]}):(0,l.jsx)(r.Fragment,{children:this.props.fromCartPage&&(0,l.jsx)(r.Fragment,{children:!e.is_operational&&(0,l.jsxs)("span",{className:"text-danger text-uppercase font-w600 text-sm08",children:[" ",(0,l.jsx)("i",{className:"si si-close"})," ",localStorage.getItem("addressDoesnotDeliverToText")]})})}),null!==e.tag&&(0,l.jsx)("h6",{className:"m-0 text-uppercase",children:(0,l.jsx)("strong",{children:e.tag})}),(0,l.jsxs)("div",{children:[null!==e.house&&(0,l.jsx)("p",{className:"m-0 text-capitalize",children:null===e.tag?(0,l.jsx)("strong",{children:e.house}):(0,l.jsx)("span",{children:e.house})}),(0,l.jsx)("p",{className:"m-0 text-capitalize text-sm08",children:e.address})]})]}),(0,l.jsx)("div",{children:!this.props.fromCartPage&&this.props.deleteButton&&(0,l.jsx)(r.Fragment,{children:t.data.default_address_id!==e.id&&(0,l.jsx)("button",{className:"btn btn-sm pull-right btn-address-default p-0 m-0 btn-delete-address",style:{border:"0",right:"0px",fontSize:"1.3rem",zIndex:2},children:(0,l.jsx)("i",{className:"si si-trash",style:{fontSize:"1.3rem"},onClick:this.handleDropdown})})})}),(0,l.jsx)(o(),{duration:500,hasTouch:!0})]}),(0,l.jsx)(n.A,{id:"simple-menu",keepMounted:!0,anchorEl:this.state.dropdownItem,open:Boolean(this.state.dropdownItem),onClose:this.handleDropdownClose,TransitionComponent:d.A,MenuListProps:{disablePadding:!0},elevation:3,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,l.jsx)(i.A,{onClick:()=>{this.props.handleDeleteAddress(e.id),this.handleDropdownClose()},children:localStorage.getItem("deleteAddressText")})})]})}}const h=c},7214:(t,e,s)=>{s.r(e),s.d(e,{default:()=>f});var r=s(9950),a=s(8974),o=s(9351),n=s(2697),i=s(5664),d=s(8858),l=s(3507),c=s(1580),h=s.n(c),u=s(8429),p=s(8341),m=s(2920),g=s(5136),x=s(4414);class y extends r.Component{constructor(){super(...arguments),this.state={no_address:!1,loading:!1,restaurant_id:null},this.handleSaveNewAddress=t=>{const{user:e}=this.props;e.success&&(this.setState({loading:!0}),this.props.saveAddress(e.data.id,e.data.auth_token,t))},this.handleSetDefaultAddress=(t,e)=>{const{user:s}=this.props;s.success&&this.props.setDefaultAddress(s.data.id,t,s.data.auth_token).then((()=>{this.setState({loading:!0});new Promise((t=>{const s={lat:e.latitude,lng:e.longitude,address:e.address,house:e.house,tag:e.tag};localStorage.setItem("userSetAddress",JSON.stringify(s)),t("Address Saved")})).then((()=>{this.setState({loading:!1}),"1"===localStorage.getItem("fromCart")?(localStorage.removeItem("fromCart"),this.context.router.history.push("/cart")):(this.props.clearRestaurantList(),this.context.router.history.goBack())}))}))},this.handleDeleteAddress=t=>{const{user:e}=this.props;e.success&&(this.setState({loading:!0}),this.props.deleteAddress(e.data.id,t,e.data.auth_token))}}componentDidMount(){document.getElementsByTagName("body")[0].classList.add("bg-light");const{user:t}=this.props;"undefined"!==typeof this.props.location.state?this.setState({restaurant_id:this.props.location.state.restaurant_id},(()=>{null!==localStorage.getItem("storeColor")&&t.success&&(this.props.getAddresses(t.data.id,t.data.auth_token,this.state.restaurant_id),this.props.updateUserInfo(t.data.id,t.data.auth_token))})):null!==localStorage.getItem("storeColor")&&t.success&&(this.props.getAddresses(t.data.id,t.data.auth_token,this.state.restaurant_id),this.props.updateUserInfo(t.data.id,t.data.auth_token))}componentWillReceiveProps(t){0===t.addresses.length&&this.setState({no_address:!0,loading:!1}),this.setState({loading:!1})}componentWillUnmount(){document.getElementsByTagName("body")[0].classList.remove("bg-light")}render(){if(window.innerWidth>768)return(0,x.jsx)(u.C5,{to:"/"});if(null===localStorage.getItem("storeColor"))return(0,x.jsx)(u.C5,{to:"/"});const{addresses:t,user:e}=this.props;return e.success?(0,x.jsx)(r.Fragment,{children:this.state.loading?(0,x.jsx)(g.A,{}):(0,x.jsxs)(r.Fragment,{children:[(0,x.jsx)(i.A,{boxshadow:!0,has_title:!0,title:localStorage.getItem("accountManageAddress"),disable_search:!0,homeButton:!0}),(0,x.jsxs)("div",{className:"block-content block-content-full pt-80 pb-80 height-100-percent",children:[0===t.length&&!this.state.no_address&&(0,x.jsxs)(d.Ay,{height:600,width:400,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb",children:[(0,x.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"75",height:"22"}),(0,x.jsx)("rect",{x:"0",y:"30",rx:"0",ry:"0",width:"350",height:"18"}),(0,x.jsx)("rect",{x:"0",y:"60",rx:"0",ry:"0",width:"300",height:"18"}),(0,x.jsx)("rect",{x:"0",y:"90",rx:"0",ry:"0",width:"100",height:"18"}),(0,x.jsx)("rect",{x:"0",y:170,rx:"0",ry:"0",width:"75",height:"22"}),(0,x.jsx)("rect",{x:"0",y:200,rx:"0",ry:"0",width:"350",height:"18"}),(0,x.jsx)("rect",{x:"0",y:230,rx:"0",ry:"0",width:"300",height:"18"}),(0,x.jsx)("rect",{x:"0",y:260,rx:"0",ry:"0",width:"100",height:"18"}),(0,x.jsx)("rect",{x:"0",y:340,rx:"0",ry:"0",width:"75",height:"22"}),(0,x.jsx)("rect",{x:"0",y:370,rx:"0",ry:"0",width:"350",height:"18"}),(0,x.jsx)("rect",{x:"0",y:400,rx:"0",ry:"0",width:"300",height:"18"}),(0,x.jsx)("rect",{x:"0",y:430,rx:"0",ry:"0",width:"100",height:"18"})]}),t.length?t.map((t=>(0,x.jsx)(n.A,{handleDeleteAddress:this.handleDeleteAddress,deleteButton:!0,address:t,user:e,fromCartPage:null!==this.state.restaurant_id,handleSetDefaultAddress:this.handleSetDefaultAddress},t.id))):(0,x.jsx)("div",{className:"text-center mt-50 font-w600 text-muted",children:localStorage.getItem("noAddressText")})]}),(0,x.jsxs)(l.A,{to:"/search-location",className:"btn-new-address",style:{backgroundColor:localStorage.getItem("storeColor"),zIndex:"2"},children:[localStorage.getItem("buttonNewAddress"),(0,x.jsx)(h(),{duration:200})]})]})}):(0,x.jsx)(u.C5,{to:"/login"})}}y.contextTypes={router:()=>null};const f=(0,p.Ng)((t=>({user:t.user.user,addresses:t.addresses.addresses})),{getAddresses:a.tS,saveAddress:a.Ex,deleteAddress:a.ab,updateUserInfo:m.bu,setDefaultAddress:a.y_,clearRestaurantList:o.Bg})(y)},5664:(t,e,s)=>{s.d(e,{A:()=>u});var r=s(9950),a=s(1580),o=s.n(a),n=s(413),i=s.n(n),d=s(4414);class l extends r.Component{constructor(){super(...arguments),this.state={shareButton:!1,androidShareButton:!1},this.shareLink=t=>{navigator.share&&navigator.share({url:t.link}).then((()=>console.log("Successful share"))).catch((t=>console.log("Error sharing",t)))},this.shareLinkViaAndroidApp=t=>{"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&window.Android.shareDataThroughIntent(t.link)}}componentDidMount(){navigator.share&&this.setState({shareButton:!0}),"FoodomaaAndroidWebViewUA"===navigator.userAgent&&"undefined"!==window.Android&&this.setState({shareButton:!1,androidShareButton:!0})}render(){return(0,d.jsxs)(r.Fragment,{children:[this.state.shareButton&&(0,d.jsxs)("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:()=>this.shareLink(this.props),children:[(0,d.jsx)("i",{className:"si si-share"}),(0,d.jsx)(o(),{duration:"500"})]}),this.state.androidShareButton&&(0,d.jsxs)("button",{type:"button",className:"btn search-navs-btns nav-share-btn",style:{position:"relative"},onClick:()=>this.shareLinkViaAndroidApp(this.props),children:[(0,d.jsx)("i",{className:"si si-share"}),(0,d.jsx)(o(),{duration:"500"})]})]})}}const c=l;class h extends r.Component{render(){return(0,d.jsx)(r.Fragment,{children:(0,d.jsx)("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"},children:(0,d.jsx)("div",{className:"block m-0",children:(0,d.jsx)("div",{className:"block-content p-0 ".concat(this.props.dark&&"nav-dark"),children:(0,d.jsxs)("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box"),children:[!this.props.disable_back_button&&(0,d.jsxs)("div",{className:"input-group-prepend",children:[this.props.back_to_home&&(0,d.jsxs)("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:()=>{setTimeout((()=>{this.context.router.history.push("/")}),200)},children:[(0,d.jsx)("i",{className:"si si-arrow-left"}),(0,d.jsx)(o(),{duration:"500"})]}),this.props.goto_orders_page&&(0,d.jsxs)("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:()=>{setTimeout((()=>{this.context.router.history.push("/my-orders")}),200)},children:[(0,d.jsx)("i",{className:"si si-arrow-left"}),(0,d.jsx)(o(),{duration:"500"})]}),this.props.goto_accounts_page&&(0,d.jsxs)("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:()=>{setTimeout((()=>{this.context.router.history.push("/my-account")}),200)},children:[(0,d.jsx)("i",{className:"si si-arrow-left"}),(0,d.jsx)(o(),{duration:"500"})]}),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&(0,d.jsxs)("button",{type:"button",className:"btn search-navs-btns ".concat(this.props.dark&&"nav-dark"),style:{position:"relative"},onClick:()=>{setTimeout((()=>{this.context.router.history.goBack()}),200)},children:[(0,d.jsx)("i",{className:"si si-arrow-left"}),(0,d.jsx)(o(),{duration:"500"})]})]}),(0,d.jsxs)("p",{className:"form-control search-input d-flex align-items-center ".concat(this.props.dark&&"nav-dark"),children:[this.props.logo&&(0,d.jsx)("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?(0,d.jsx)(r.Fragment,{children:this.props.from_checkout?(0,d.jsxs)("span",{className:"nav-page-title",id:"checkoutNavPageTitle",children:[localStorage.getItem("cartToPayText")," ",(0,d.jsxs)("span",{style:{color:localStorage.getItem("storeColor")},children:["left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.title,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")]})]}):(0,d.jsx)("span",{className:"nav-page-title",children:this.props.title})}):null,this.props.has_delivery_icon&&(0,d.jsx)(i(),{left:!0,children:(0,d.jsx)("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"})})]}),this.props.has_restaurant_info?(0,d.jsxs)("div",{className:"fixed-restaurant-info hidden",ref:t=>{this.heading=t},children:[(0,d.jsx)("span",{className:"font-w700 fixedRestaurantName",children:this.props.restaurant.name}),(0,d.jsx)("br",{}),(0,d.jsxs)("span",{className:"font-w400 fixedRestaurantTime",children:[(0,d.jsx)("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText")]})]}):null,(0,d.jsxs)("div",{className:"input-group-append",children:[!this.props.disable_search&&(0,d.jsxs)("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"},children:[(0,d.jsx)("i",{className:"si si-magnifier"}),(0,d.jsx)(o(),{duration:"500"})]}),this.props.homeButton&&(0,d.jsxs)("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:()=>{setTimeout((()=>{this.context.router.history.push("/")}),200)},children:[(0,d.jsx)("i",{className:"si si-home"}),(0,d.jsx)(o(),{duration:"500"})]}),this.props.shareButton&&(0,d.jsx)(c,{link:window.location.href})]})]})})})})})}}h.contextTypes={router:()=>null};const u=h},8974:(t,e,s)=>{s.d(e,{Ex:()=>i,ab:()=>d,tS:()=>n,y_:()=>l});var r=s(8262),a=s(1753),o=s(8469);const n=(t,e,s)=>n=>{o.A.post(a.ss,{user_id:t,token:e,restaurant_id:s}).then((t=>{const e=t.data;return n({type:r.oz,payload:e})})).catch((function(t){console.log(t)}))},i=(t,e,s,n,i,d,l,c)=>h=>{o.A.post(a.RA,{token:e,user_id:t,latitude:s,longitude:n,address:i,house:d,tag:l,get_only_default_address:c}).then((t=>{const e=t.data;return h({type:r.b8,payload:e})})).catch((function(t){console.log(t)}))},d=(t,e,s)=>n=>{o.A.post(a.pP,{token:s,user_id:t,address_id:e}).then((t=>{const e=t.data;return n({type:r.fJ,payload:e})})).catch((function(t){console.log(t)}))},l=(t,e,s)=>n=>o.A.post(a.tv,{token:s,user_id:t,address_id:e}).then((t=>{const e=t.data;return n({type:r.Zm,payload:e})})).catch((function(t){console.log(t)}))},413:(t,e,s)=>{function r(t,e){var s=e.left,r=e.right,a=e.mirror,o=e.opposite,n=(s?1:0)|(r?2:0)|(a?16:0)|(o?32:0)|(t?64:0);if(h.hasOwnProperty(n))return h[n];if(!a!=!(t&&o)){var i=[r,s];s=i[0],r=i[1]}var d=s?"-100%":r?"100%":"0",c=t?"from {\n        opacity: 1;\n      }\n      to {\n        transform: translate3d("+d+", 0, 0) skewX(30deg);\n        opacity: 0;\n      }\n    ":"from {\n        transform: translate3d("+d+", 0, 0) skewX(-30deg);\n        opacity: 0;\n      }\n      60% {\n        transform: skewX(20deg);\n        opacity: 1;\n      }\n      80% {\n        transform: skewX(-5deg);\n        opacity: 1;\n      }\n      to {\n        transform: none;\n        opacity: 1;\n      }";return h[n]=(0,l.animation)(c),h[n]}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.defaults,e=t.children,s=(t.out,t.forever),a=t.timeout,o=t.duration,n=void 0===o?l.defaults.duration:o,d=t.delay,c=void 0===d?l.defaults.delay:d,h=t.count,u=void 0===h?l.defaults.count:h,p=function(t,e){var s={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r]);return s}(t,["children","out","forever","timeout","duration","delay","count"]),m={make:r,duration:void 0===a?n:a,delay:c,forever:s,count:u,style:{animationFillMode:"both"}};return p.left,p.right,p.mirror,p.opposite,(0,i.default)(p,m,m,e)}Object.defineProperty(e,"__esModule",{value:!0});var o,n=s(7374),i=(o=n)&&o.__esModule?o:{default:o},d=s(1942),l=s(7244),c={out:d.bool,left:d.bool,right:d.bool,mirror:d.bool,opposite:d.bool,duration:d.number,timeout:d.number,delay:d.number,count:d.number,forever:d.bool},h={};a.propTypes=c,e.default=a,t.exports=e.default}}]);